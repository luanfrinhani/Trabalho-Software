{"version":3,"sources":["index.js"],"names":["DefaultStore","state","callbacks","getState","setState","patch","prevState","nextState","_publish","subscribe","listener","push","splice","indexOf","args","forEach","VERSION","module","exports","defaultStore"],"mappings":";;AAAA;AACA;AACA;IACMA,Y;AAGJ,0BAAe;AACb,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;;;SAEDC,Q,GAAA,oBAAY;AACV,WAAO,KAAKF,KAAZ;AACD,G;;SAEDG,Q,GAAA,kBAAUC,KAAV,EAAiB;AACf,QAAMC,SAAS,gBAAQ,KAAKL,KAAb,CAAf;;AACA,QAAMM,SAAS,gBAAQ,KAAKN,KAAb,EAAuBI,KAAvB,CAAf;;AAEA,SAAKJ,KAAL,GAAaM,SAAb;;AACA,SAAKC,QAAL,CAAcF,SAAd,EAAyBC,SAAzB,EAAoCF,KAApC;AACD,G;;SAEDI,S,GAAA,mBAAWC,QAAX,EAAqB;AAAA;;AACnB,SAAKR,SAAL,CAAeS,IAAf,CAAoBD,QAApB;AACA,WAAO,YAAM;AACX;AACA,MAAA,KAAI,CAACR,SAAL,CAAeU,MAAf,CACE,KAAI,CAACV,SAAL,CAAeW,OAAf,CAAuBH,QAAvB,CADF,EAEE,CAFF;AAID,KAND;AAOD,G;;SAEDF,Q,GAAA,oBAAmB;AAAA,sCAANM,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACjB,SAAKZ,SAAL,CAAea,OAAf,CAAuB,UAACL,QAAD,EAAc;AACnCA,MAAAA,QAAQ,MAAR,SAAYI,IAAZ;AACD,KAFD;AAGD,G;;;;;AAnCGd,Y,CACGgB,O;;AAqCTC,MAAM,CAACC,OAAP,GAAiB,SAASC,YAAT,GAAyB;AACxC,SAAO,IAAInB,YAAJ,EAAP;AACD,CAFD","sourcesContent":["/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n  static VERSION = require('../package.json').version\n\n  constructor () {\n    this.state = {}\n    this.callbacks = []\n  }\n\n  getState () {\n    return this.state\n  }\n\n  setState (patch) {\n    const prevState = { ...this.state }\n    const nextState = { ...this.state, ...patch }\n\n    this.state = nextState\n    this._publish(prevState, nextState, patch)\n  }\n\n  subscribe (listener) {\n    this.callbacks.push(listener)\n    return () => {\n      // Remove the listener.\n      this.callbacks.splice(\n        this.callbacks.indexOf(listener),\n        1\n      )\n    }\n  }\n\n  _publish (...args) {\n    this.callbacks.forEach((listener) => {\n      listener(...args)\n    })\n  }\n}\n\nmodule.exports = function defaultStore () {\n  return new DefaultStore()\n}\n"]}