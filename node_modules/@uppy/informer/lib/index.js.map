{"version":3,"sources":["index.js"],"names":["require","Plugin","h","module","exports","uppy","opts","render","state","info","isHidden","message","details","displayErrorAlert","errorMessage","alert","handleMouseOver","clearTimeout","infoTimeoutID","handleMouseLeave","setTimeout","hideInfo","type","id","title","defaultOptions","install","target","mount","VERSION"],"mappings":";;;;;;;;eAAmBA,OAAO,CAAC,YAAD,C;IAAlBC,M,YAAAA,M;;gBACMD,OAAO,CAAC,QAAD,C;IAAbE,C,aAAAA,C;AAER;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP;AAAA;;AAGE,oBAAaC,IAAb,EAAmBC,IAAnB,EAAyB;AAAA;;AACvB,+BAAMD,IAAN,EAAYC,IAAZ;;AADuB,UAYzBC,MAZyB,GAYhB,UAACC,KAAD,EAAW;AAAA,wBACqBA,KAAK,CAACC,IAD3B;AAAA,UACVC,QADU,eACVA,QADU;AAAA,UACAC,OADA,eACAA,OADA;AAAA,UACSC,OADT,eACSA,OADT;;AAGlB,eAASC,iBAAT,GAA8B;AAC5B,YAAMC,YAAY,GAAMH,OAAN,cAAsBC,OAAxC;AACAG,QAAAA,KAAK,CAACD,YAAD,CAAL;AACD;;AAED,UAAME,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5BC,QAAAA,YAAY,CAAC,MAAKZ,IAAL,CAAUa,aAAX,CAAZ;AACD,OAFD;;AAIA,UAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,cAAKd,IAAL,CAAUa,aAAV,GAA0BE,UAAU,CAAC,MAAKf,IAAL,CAAUgB,QAAX,EAAqB,IAArB,CAApC;AACD,OAFD;;AAIA,aACE;AACE,QAAA,SAAS,EAAC,oBADZ;AAEE,uBAAaX;AAFf,SAIE;AAAG,QAAA,IAAI,EAAC;AAAR,SACGC,OADH,EAEG,GAFH,EAGGC,OAAO,IACN;AACE,sBAAYA,OADd;AAEE,kCAAuB,UAFzB;AAGE,8BAAmB,QAHrB;AAIE,QAAA,IAAI,EAAC,SAJP;AAKE,QAAA,OAAO,EAAEC,iBALX;AAME,QAAA,WAAW,EAAEG,eANf;AAOE,QAAA,YAAY,EAAEG;AAPhB,aAJJ,CAJF,CADF;AAwBD,KApDwB;;AAEvB,UAAKG,IAAL,GAAY,mBAAZ;AACA,UAAKC,EAAL,GAAU,MAAKjB,IAAL,CAAUiB,EAAV,IAAgB,UAA1B;AACA,UAAKC,KAAL,GAAa,UAAb,CAJuB,CAMvB;;AACA,QAAMC,cAAc,GAAG,EAAvB,CAPuB,CAQvB;;AACA,UAAKnB,IAAL,gBAAiBmB,cAAjB,EAAoCnB,IAApC;AATuB;AAUxB;;AAbH;;AAAA,SAyDEoB,OAzDF,GAyDE,mBAAW;AACT,QAAMC,MAAM,GAAG,KAAKrB,IAAL,CAAUqB,MAAzB;;AACA,QAAIA,MAAJ,EAAY;AACV,WAAKC,KAAL,CAAWD,MAAX,EAAmB,IAAnB;AACD;AACF,GA9DH;;AAAA;AAAA,EAAwC1B,MAAxC,UACS4B,OADT","sourcesContent":["const { Plugin } = require('@uppy/core')\nconst { h } = require('preact')\n\n/**\n * Informer\n * Shows rad message bubbles\n * used like this: `uppy.info('hello world', 'info', 5000)`\n * or for errors: `uppy.info('Error uploading img.jpg', 'error', 5000)`\n *\n */\nmodule.exports = class Informer extends Plugin {\n  static VERSION = require('../package.json').version\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.type = 'progressindicator'\n    this.id = this.opts.id || 'Informer'\n    this.title = 'Informer'\n\n    // set default options\n    const defaultOptions = {}\n    // merge default options with the ones set by user\n    this.opts = { ...defaultOptions, ...opts }\n  }\n\n  render = (state) => {\n    const { isHidden, message, details } = state.info\n\n    function displayErrorAlert () {\n      const errorMessage = `${message} \\n\\n ${details}`\n      alert(errorMessage)\n    }\n\n    const handleMouseOver = () => {\n      clearTimeout(this.uppy.infoTimeoutID)\n    }\n\n    const handleMouseLeave = () => {\n      this.uppy.infoTimeoutID = setTimeout(this.uppy.hideInfo, 2000)\n    }\n\n    return (\n      <div\n        className=\"uppy uppy-Informer\"\n        aria-hidden={isHidden}\n      >\n        <p role=\"alert\">\n          {message}\n          {' '}\n          {details && (\n            <span\n              aria-label={details}\n              data-microtip-position=\"top-left\"\n              data-microtip-size=\"medium\"\n              role=\"tooltip\"\n              onClick={displayErrorAlert}\n              onMouseOver={handleMouseOver}\n              onMouseLeave={handleMouseLeave}\n            >\n              ?\n            </span>\n          )}\n        </p>\n      </div>\n    )\n  }\n\n  install () {\n    const target = this.opts.target\n    if (target) {\n      this.mount(target, this)\n    }\n  }\n}\n"]}